cov_calc computes satellite IR observation covariances based on Desroziers' method. It will compute interchannel correlations, if they exist. 

See
Desroziers, Gérald, et al. "Diagnosis of observation, background and analysis‐error statistics in observation space." Quarterly Journal of the Royal Meteorological Society 131.613 (2005): 3385-3396. 

This program uses the radstat.gdas.$date files, and outputs up to four binary files.  The first binary file contains the covariance matrix (plus extra information about the matrix), which can readily be used in the GSI. Outputting the other files is optional. They contain the wavenumbers of the satellite instrument, the assumed obs error, and the correlation matrix.

To use the computed covariance matrix in the GSI:
1.  Add a table to the anavinfo file, following the comments in src/correlated_obsmod.F90
2.  Copy the covariance matrix into the data directory.  For parallel GFS, this can be achieved by adding a line such as 'cp $ROTDIR/Rcov* $DATA' to exglobal_analysis.sh.ecf.

Before running, compile the program by typing 'make'.

There are two ways to run cov_calc.  The bottleneck of this program is in dealing with the radstat files.  Using parallel_run.sh will process the radstat files in parallel.  To use this script, edit its first few lines, and then simply run it.  This script has not yet been tested on WCOSS.

If the amount of radstat files is small, or they have already been processed, then run.sh can be used.  Edit its first few lines and either run it or submit submit_job.sh as a job.

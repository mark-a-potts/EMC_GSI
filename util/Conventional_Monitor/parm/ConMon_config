#
#  Conventional Monitor package configuration file
#

echo "begin ConMon_config"

export MY_MACHINE=wcoss_d


#
# MY_CONMON should point to your working directory which contains the
# top level directory to the ConMon package. 
#

export MY_CONMON=/gpfs/dell2/emc/modeling/noscrub/Edward.Safford/ProdGSI/util/Conventional_Monitor

#
#  The CONMON_TANKDIR will be the location for the extracted data files and
#  the control files used for image plotting.  This is the base definition
#  and the succedding scripts will construct and use subdirectories under
#  this location.
#

export CONMON_TANKDIR=/u/Edward.Safford/nbns
export C_TANKverf=${C_TANKverf:-${CONMON_TANKDIR}}

export C_TANKDIR=${CONMON_TANKDIR}/stats/${CONMON_SUFFIX}
export C_IMGNDIR=${CONMON_TANKDIR}/imgn/${CONMON_SUFFIX}/${RUN}/conmon


if [[ $MY_MACHINE = "wcoss" ]]; then
   shell=sh
   . /usrx/local/Modules/default/init/${shell}
   module load lsf
   module unload GrADS		# version 2.0.1 is loaded automatically, but it's out of
   module load GrADS		# date -- curent default is 2.0.2
   module load grib_util
   module load prod_util
   module load util_shared

   export GRADS=grads

   export NDATE=${NWPROD}/util/exec/ndate
   export UTILS_BIN=
   export LLQ=
   export SUB="bsub"
   export NCP=/bin/cp
   export NWPROD=/nwprod
   export FIXDIR=/nwprod/fix
   export COMPRESS=gzip
   export UNCOMPRESS="gunzip -f"
   export TIMEX=
   export PROJECT=${PROJECT:-GDAS-T2O}
   export JOB_QUEUE=${JOB_QUEUE:-dev_shared}

elif [[ $MY_MACHINE = "wcoss_c" ]]; then
   module load prod_util        # defines $NDATE among other things
   module load prod_envir
   module load grib_util
   module load util_shared

   export SUB="bsub"
   export COMPRESS=gzip
   export UNCOMPRESS="gunzip -f"
   export PROJECT=${PROJECT:-GDAS-T2O}
   export JOB_QUEUE=${JOB_QUEUE:-dev_shared}

elif [[ $MY_MACHINE = "wcoss_d" ]]; then
   shell=sh
   source /usrx/local/prod/lmod/lmod/init/${shell}

   MODULEPATH=/usrx/local/prod/lmod/lmod/modulefiles/Core
   MODULEPATH=${MODULEPATH}:/usrx/local/prod/modulefiles/core_third
   MODULEPATH=${MODULEPATH}:/usrx/local/prod/modulefiles/defs
   MODULEPATH=${MODULEPATH}:/gpfs/dell1/nco/ops/nwprod/modulefiles/core_prod
   export MODULEPATH=${MODULEPATH}:/usrx/local/dev/modulefiles

   module load ips/18.0.1.163
   module load metplus/2.1
   module load lsf/10.1
   module load prod_util/1.1.2
   module load GrADS/2.2.0
   module load grib_util/1.1.1

   export GRADS=`which grads`
   export SUB="bsub"
   export COMPRESS=/usr/bin/gzip
   export UNCOMPRESS="/usr/bin/gunzip -f"
   export PROJECT=${PROJECT:-GDAS-T2O}
   export JOB_QUEUE=${JOB_QUEUE:-dev_shared}
 
elif [[ $MY_MACHINE = "hera" ]]; then
#===================================
#  Note:  need to update NDATE 
#    	  see RadMon_config for solution
#===================================
   export SUB=sbatch
   export NWPROD=/scratch4/NCEPDEV/da/save/Michael.Lueken/nwprod
   export COMPRESS=gzip
   export UNCOMPRESS="gunzip -f"
fi

export Z="gz"

export ACCOUNT=${ACCOUNT:-}
 
export C_STMP=${C_STMP:-/gpfs/dell2/stmp}
export C_STMP_USER=${C_STMP_USER:-${C_STMP}/${LOGNAME}}
export C_PTMP=${C_PTMP:-/gpfs/dell2/ptmp}
export C_PTMP_USER=${C_PTMP_USER:-${C_PTMP}/${LOGNAME}}

export C_LOGDIR=${C_PTMP_USER}/logs/${CONMON_SUFFIX}
export LOGS_conmon=${LOGS_conmon:-${C_LOGDIR}}
export WORK_conmon=${WORK_conmon:-${C_STMP_USER}/${CONMON_SUFFIX}/${NET}/ConMon}

#export CONVINFO_FILE=${FIXDIR}/global_convinfo.txt  # does this belong in this config file? IMG/parm?


#
#  Web server resources include the sever name (WEB_SVR), the user name
#  on the web server (WEB_USER), and location of the top level directory
#  for the html on the web server (WEBDIR).
#
export WEBDIR=/home/people/emc/www/htdocs/gmb/gdas/es_conv
export WEBUSER=esafford
export WEBSVR=emcrzdm


#
#  Definitions for internal reference
#
export CONMON_DATA_EXTRACT=${CONMON_DATA_EXTRACT:-${MY_CONMON}/data_extract}
export C_DE_EXEC=${C_DE_EXEC:-${CONMON_DATA_EXTRACT}/exec}
export C_DE_PARM=${C_DE_PARM:-${CONMON_DATA_EXTRACT}/parm}
export C_DE_SCRIPTS=${C_DE_SCRIPTS:-${CONMON_DATA_EXTRACT}/ush}

export CONMON_IMAGE_GEN=${CONMON_IMAGE_GEN:-${MY_CONMON}/image_gen}
export C_IG_EXEC=${C_IG_EXEC:-${CONMON_IMAGE_GEN}/exec}
export C_IG_GSCRIPTS=${C_IG_GSCRIPTS:-${CONMON_IMAGE_GEN}/gscripts}
export C_IG_PARM=${C_IG_PARM:-${CONMON_IMAGE_GEN}/parm}
export C_IG_SCRIPTS=${C_IG_SCRIPTS:-${CONMON_IMAGE_GEN}/ush}
export C_IG_FIX=${C_IG_FIX:-${CONMON_IMAGE_GEN}/fix}
export C_IG_HTML=${C_IG_HTML:-${CONMON_IMAGE_GEN}/html}

export CONMON_PARM=${CONMON_PARM:-${MY_CONMON}/parm}
. $CONMON_PARM/ConMon.ver

export HOMEconmon_shared=${HOMEconmon_shared:-${MY_CONMON}/nwprod/conmon_shared.v${conmon_shared_ver}}
export HOMEgdascmon=${HOMEgdascmon:-${MY_CONMON}/nwprod/gdas_conmon.v${gdas_conmon_ver}}
export HOMEgdas_conmon=${HOMEgdascmon}
export HOMEgfs_conmon=$HOMEgdas_conmon

export USHconmon=${USHconmon:-${HOMEconmon_shared}/ush}
export EXECconmon=${EXECconmon:-${HOMEconmon_shared}/exec}

